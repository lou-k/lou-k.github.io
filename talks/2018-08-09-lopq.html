<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Lou Kratz | Scaling Visual Search with Locally Optimized Product Quantization
</title>
  <meta name="description" content="Lou Kratz is a research engineer who specializes in computer vision and machine learning.
">

  <link rel="shortcut icon" href="https://lou.dev/assets/img/favicon.ico">

  <link rel="stylesheet" href="https://lou.dev/assets/css/main.css">
  <link rel="canonical" href="https://lou.dev/talks/2018-08-09-lopq">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
        <strong>Lou</strong> Kratz
    </span>
    

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="https://lou.dev/">about</a>

        <!-- Blog -->
        <a class="page-link" href="https://lou.dev/blog/">blog</a>

        <!-- Pages -->
        
          
        
          
        
          
        
          
            <a class="page-link" href="https://lou.dev/publications/">publications</a>
          
        
          
            <a class="page-link" href="https://lou.dev/talks/">talks</a>
          
        
          
            <a class="page-link" href="https://lou.dev/teaching/">teaching</a>
          
        
          
        
          
        
          
        
          
        

        <!-- CV link -->
        <!-- <a class="page-link" href="https://lou.dev/assets/pdf/CV.pdf">vitae</a> -->

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Scaling Visual Search with Locally Optimized Product Quantization
</h1>
    <h5 class="post-description">A talk on LOPQ I gave for <a href="https://www.meetup.com/Papers-We-Love-Philadelphia/events/252510571/" target="_blank_">Papers We Love</a> meetup in Philadelphia.
</h5>
  </header>

  <article class="post-content Scaling Visual Search with Locally Optimized Product Quantization
 clearfix">
    <p><a href="http://image.ntua.gr/iva/files/lopq.pdf">Locally Optimized Product Quantization</a> is an efficient and accurate approximate nearest neighbor algorithm for large scale and high dimensionality data sets. I presented this talk on the paper and <a href="http://www.curalate.com/">Curalate</a>’s use of it for the <a href="https://www.meetup.com/Papers-We-Love-Philadelphia/events/252510571/">Papers We Love</a> meetup in Philadelphia.</p>

<p>Being a meetup, I kept the talk pretty casual and encouraged interruptions from the audience.</p>

<h2 id="video">Video</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/RgxCaiQ-kig?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>

<h2 id="slides">Slides</h2>
<p>[<a href="https://drive.google.com/open?id=1mHNJWw_lYhsJwD-0H0-sdmCxa1tfeICz">Keynote</a>]</p>

<h2 id="abstract">Abstract</h2>
<p>Approximate nearest neighbor (ANN) search is an essential technique for big data applications, and has only become more relevant as the scale of our data has increased dramatically in the past decade. At Curalate, we use ANN to power our visual search technology that enables our clients to identify apparel products in user-generated photos from social networks.</p>

<p>Kalantidis and Avrithi present an extremely fast and accurate ANN algorithm in their paper “Locally Optimized Product Quantization for Approximate Nearest Neighbor Search” (LOPQ). Their key contribution is a quantization method that minimizes distortion by leveraging Principle Component Analysis on local regions of the data. This technique enables fast and accurate searching over data sets of millions or even billions of items.</p>

<p>In this talk, I will present the LOPQ paper by Kalantidis and Avrithi, and follow it with a deep dive into how we have implemented it at Curalate to power our visual search technology. By leveraging LOPQ, we reduced our storage requirements by 90% allowing us to store an index of 31 million images in 1GB of RAM and search it in a only few hundred milliseconds.</p>

<h2 id="resources">Resources</h2>

<ul>
  <li>Papers discussed in the talk
    <ul>
      <li><a href="https://lear.inrialpes.fr/pubs/2011/JDS11/jegou_searching_with_quantization.pdf">Product Quantization for Nearest Neighbor Search</a>. J. Herve, M. Douze, and C. Schmid. TPAMI 2011.</li>
      <li><a href="http://cache-ash04.cdn.yandex.net/download.yandex.ru/company/cvpr2012.pdf">The Inverted Multi-Index</a>. A. Babenko and V. Lempitsky. CVPR 2012.</li>
      <li><a href="http://kaiminghe.com/publications/pami13opq.pdf">Optimized Product Quantization</a>. T. Ge, K. He, Q. Ke, and J. Sun. TPAMI 2013.</li>
      <li><a href="http://image.ntua.gr/iva/files/lopq.pdf">Locally Optimized Product Quantization for Approximate Nearest Neighbor Search</a>. Y. Kalantidis and Y. Avrithis. CVPR 2013.</li>
    </ul>
  </li>
  <li>Sofware
    <ul>
      <li><a href="https://github.com/facebookresearch/faiss">faiss</a> - Super fast LOPQ implementation from Facebook Research.</li>
      <li><a href="https://github.com/yahoo/lopq">Yahoo LOPQ</a> - Yahoo’s LOPQ Implementation Used at Flickr</li>
      <li><a href="https://github.com/dmllr/fast-lopq">Fast LOPQ</a> - A fork of Yahoo’s library written in C++</li>
    </ul>
  </li>
</ul>

  </article>

  

  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    &copy; Copyright 2020 Lou Kratz.
    
    
  </div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="https://lou.dev/assets/js/common.js"></script>


<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js"></script>
<script src="https://lou.dev/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="https://lou.dev/assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="https://lou.dev/assets/css/academicons.min.css">
<link rel="stylesheet" href="https://lou.dev/assets/css/github.css">

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-124061948-1', 'auto');
ga('send', 'pageview');
</script>


  </body>

</html>
